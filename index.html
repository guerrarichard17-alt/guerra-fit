<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Guerra Fit ‚Äì Hybrid Athlete Protocol</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />

  <style>
    /* --- DESIGN SYSTEM (Black Ops / Military Theme) --- */
    :root {
      --bg-app: #000000;       
      --bg-card: #111111;      
      --bg-input: #222222;     
      --border: #333333;       
      
      --text-main: #e5e5e5;
      --text-muted: #888888;
      
      --primary: #f59e0b;      /* Amber/Gold (Energia) */
      --primary-glow: rgba(245, 158, 11, 0.2);
      
      --accent-strength: #dc2626; /* Red */
      --accent-crossfit: #3b82f6; /* Blue */
      
      --radius: 8px;
      --font-stack: 'Inter', system-ui, sans-serif;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    body {
      margin: 0;
      background: var(--bg-app);
      color: var(--text-main);
      font-family: var(--font-stack);
      font-size: 14px;
      padding-bottom: 90px;
    }

    /* HEADER */
    header {
      background: rgba(0, 0, 0, 0.95);
      border-bottom: 1px solid var(--border);
      padding: 16px;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    header h1 {
      margin: 0;
      font-size: 18px;
      font-weight: 900;
      letter-spacing: -0.5px;
      text-transform: uppercase;
      color: var(--primary);
    }
    header small {
      color: var(--text-muted);
      font-size: 11px;
      display: block;
      margin-top: 4px;
    }

    /* PROGRESS BAR */
    .progress-container {
      margin-top: 12px;
      background: var(--bg-input);
      height: 8px;
      border-radius: 99px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: var(--primary);
      width: 0%;
      transition: width 0.4s ease;
      box-shadow: 0 0 10px var(--primary-glow);
    }
    .progress-label {
      font-size: 10px;
      color: var(--text-muted);
      text-align: right;
      margin-top: 4px;
    }

    main {
      padding: 16px;
      max-width: 800px;
      margin: 0 auto;
    }

    /* TABS */
    .main-tabs {
      display: flex;
      background: var(--bg-input);
      padding: 4px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      position: sticky;
      top: 85px;
      z-index: 90;
    }
    .main-tabs button {
      flex: 1;
      background: transparent;
      border: none;
      padding: 12px;
      font-size: 13px;
      font-weight: 700;
      color: var(--text-muted);
      cursor: pointer;
    }
    .main-tabs button.active {
      background: var(--bg-card);
      color: var(--primary);
      border: 1px solid var(--border);
      border-radius: 4px;
    }

    .sub-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 15px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    .sub-tabs button {
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-muted);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      white-space: nowrap;
      text-transform: uppercase;
      font-weight: 600;
    }
    .sub-tabs button.active {
      background: var(--primary);
      color: #000;
      border-color: var(--primary);
    }

    /* CARDS */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 16px;
    }

    /* EXERCISE ITEM */
    .exercise-card {
      background: var(--bg-card);
      border-left: 3px solid var(--border);
      padding: 14px;
      margin-bottom: 12px;
      border-radius: 4px;
      position: relative;
    }
    .type-strength { border-left-color: var(--accent-strength); }
    .type-crossfit { border-left-color: var(--accent-crossfit); }
    .type-warmup { border-left-color: #666; }

    .ex-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .ex-title {
      font-size: 15px;
      font-weight: 700;
      color: var(--text-main);
    }
    .ex-meta {
      font-size: 11px;
      color: var(--text-muted);
    }
    .badge {
      background: var(--bg-input);
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 9px;
      font-weight: bold;
      text-transform: uppercase;
    }
    .badge.cf { color: var(--accent-crossfit); border: 1px solid var(--accent-crossfit); }

    .ex-inputs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .input-group label {
      display: block;
      font-size: 9px;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-bottom: 3px;
    }
    input, select {
      width: 100%;
      background: #000;
      border: 1px solid var(--border);
      color: #fff;
      padding: 10px;
      border-radius: 4px;
    }
    input:focus { border-color: var(--primary); outline: none; }

    /* CHECKBOX */
    .ex-footer {
      margin-top: 12px;
      padding-top: 8px;
      border-top: 1px solid var(--border);
    }
    .check-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }
    .box {
      width: 20px; height: 20px;
      border: 2px solid #444;
      display: flex; align-items: center; justify-content: center;
    }
    input[type="checkbox"]:checked + .box {
      background: var(--primary); border-color: var(--primary);
    }
    input[type="checkbox"]:checked + .box::after {
      content: '‚úì'; color: #000; font-weight: bold; font-size: 12px;
    }
    
    /* DIET & SHOPPING */
    .diet-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed var(--border);
      font-size: 13px;
    }
    .shop-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--bg-input);
      cursor: pointer;
    }
    .shop-item.done { opacity: 0.4; text-decoration: line-through; }

    .hidden { display: none !important; }
    
    /* WARNING BOX */
    .warning-box {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid var(--accent-crossfit);
      color: #93c5fd;
      padding: 10px;
      font-size: 11px;
      border-radius: 6px;
      margin-bottom: 15px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
  </style>
</head>

<body>

  <header>
    <h1>GUERRA <span style="color:#fff">HYBRID</span></h1>
    <small>Bodybuilding (AM) + CrossFit (PM)</small>

    <div id="progressArea" class="hidden">
      <div class="progress-container">
        <div id="progressBar" class="progress-fill"></div>
      </div>
      <div id="progressLabel" class="progress-label">0%</div>
    </div>
  </header>

  <main>
    <nav class="main-tabs">
      <button class="active" onclick="switchMain('treino')" id="tab-treino">TREINO</button>
      <button onclick="switchMain('dieta')" id="tab-dieta">DIETA</button>
    </nav>

    <section id="view-treino">
      <div class="card">
        <div class="ex-inputs" style="margin:0; grid-template-columns: 2fr 1fr;">
          <div class="input-group">
            <label>Dia da Semana</label>
            <select id="diaSelect" onchange="renderApp()"></select>
          </div>
          <div class="input-group">
            <label>Data</label>
            <input type="date" id="dataInput" onchange="renderApp()">
          </div>
        </div>
      </div>

      <div id="crossfitWarning" class="warning-box hidden">
        <span style="font-size:18px">üí°</span>
        <div>
          <strong>Alerta H√≠brido:</strong> Se hoje tiver WOD pesado de perna √† noite, reduza 20% das cargas do treino da manh√£ para n√£o lesionar.
        </div>
      </div>

      <div class="sub-tabs">
        <button class="active" onclick="filterTreino('all')" id="sub-all">Todo</button>
        <button onclick="filterTreino('musc')" id="sub-musc">Muscula√ß√£o</button>
        <button onclick="filterTreino('cf')" id="sub-cf">CrossFit</button>
      </div>

      <div id="treinoList"></div>
    </section>

    <section id="view-dieta" class="hidden">
      <div class="card">
        <h4 style="margin:0 0 5px 0; color:var(--primary)">Combust√≠vel H√≠brido</h4>
        <p style="font-size:11px; color:var(--text-muted); margin:0;">
          Voc√™ precisa de +500kcal nos dias de treino duplo. N√£o pule o lanche da tarde.
        </p>
      </div>

      <div class="sub-tabs">
        <button class="active" onclick="renderDieta('hoje')" id="sub-diet-hoje">Hoje</button>
        <button onclick="renderDieta('semana')" id="sub-diet-semana">Semana</button>
        <button onclick="renderDieta('shop')" id="sub-diet-shop">Mercado</button>
      </div>

      <div id="dietaList"></div>
    </section>

  </main>

  <script>
    // =========================================================
    // PROTOCOLO H√çBRIDO (MUSCULA√á√ÉO MANH√É + CROSSFIT NOITE)
    // =========================================================
    const DEFAULT_TREINOS = [
      // --- SEGUNDA: PEITO & OMBRO (Preserva perna e costas para WODs comuns de Seg) ---
      { dia: "Segunda", cat: "musc", exercicio: "Aquecimento: Manguito", series: "2x15", obs: "Essencial." },
      { dia: "Segunda", cat: "musc", exercicio: "Supino Inclinado (Halter)", series: "4x8-10", obs: "Foco Superior." },
      { dia: "Segunda", cat: "musc", exercicio: "Supino Reto M√°quina", series: "3x10-12", obs: "Carga Controlada." },
      { dia: "Segunda", cat: "musc", exercicio: "Desenvolvimento Militar", series: "4x8-10", obs: "Ombros fortes." },
      { dia: "Segunda", cat: "musc", exercicio: "Eleva√ß√£o Lateral", series: "4x15", obs: "Falha." },
      { dia: "Segunda", cat: "cf", exercicio: "CrossFit (Noite)", series: "WOD", obs: "Se o WOD tiver muito 'Push', pegue leve de manh√£." },

      // --- TER√áA: COSTAS (ESPESSURA) (Rack Pull preserva perna) ---
      { dia: "Ter√ßa", cat: "musc", exercicio: "Rack Pull (Terra Parcial)", series: "3x5-6", obs: "Foco Costas. Barra no joelho." },
      { dia: "Ter√ßa", cat: "musc", exercicio: "Puxada Alta", series: "4x10", obs: "Aberto." },
      { dia: "Ter√ßa", cat: "musc", exercicio: "Remada Curvada", series: "3x12", obs: "Esmaga." },
      { dia: "Ter√ßa", cat: "musc", exercicio: "Crucifixo Inverso", series: "3x15", obs: "Posterior de Ombro." },
      { dia: "Ter√ßa", cat: "cf", exercicio: "CrossFit (Noite)", series: "WOD", obs: "Foco metab√≥lico." },

      // --- QUARTA: PERNAS (Power) ---
      // *Cuidado extremo se tiver CF a noite*
      { dia: "Quarta", cat: "musc", exercicio: "Mobilidade Quadril", series: "5 min", obs: "Soltar." },
      { dia: "Quarta", cat: "musc", exercicio: "Agachamento Livre", series: "4x6-8", obs: "Se tiver WOD de perna a noite, reduza carga 30%." },
      { dia: "Quarta", cat: "musc", exercicio: "Leg Press 45", series: "3x12", obs: "Amplitude." },
      { dia: "Quarta", cat: "musc", exercicio: "Cadeira Extensora", series: "3x15", obs: "Pump." },
      { dia: "Quarta", cat: "cf", exercicio: "CrossFit (Noite)", series: "WOD", obs: "Se fez perna pesado de manh√£, escale o WOD." },

      // --- QUINTA: BRA√áOS (Recupera√ß√£o Ativa do Tronco) ---
      // Antigo "Descanso", agora Bra√ßos para aguentar "Todo dia"
      { dia: "Quinta", cat: "musc", exercicio: "Rosca Direta", series: "4x10", obs: "B√≠ceps." },
      { dia: "Quinta", cat: "musc", exercicio: "Tr√≠ceps Testa", series: "4x10", obs: "Tr√≠ceps." },
      { dia: "Quinta", cat: "musc", exercicio: "Rosca Martelo", series: "3x12", obs: "Braquial." },
      { dia: "Quinta", cat: "musc", exercicio: "Tr√≠ceps Corda", series: "3x12", obs: "Esmaga." },
      { dia: "Quinta", cat: "cf", exercicio: "CrossFit (Noite)", series: "WOD", obs: "Dia bom para cardio longo (Endurance)." },

      // --- SEXTA: UPPER COMPLETO (Pump) ---
      { dia: "Sexta", cat: "musc", exercicio: "Supino M√°quina", series: "3x12", obs: "Peito." },
      { dia: "Sexta", cat: "musc", exercicio: "Puxada Tri√¢ngulo", series: "3x12", obs: "Costas." },
      { dia: "Sexta", cat: "musc", exercicio: "Elev. Lateral + Frontal", series: "3x12", obs: "Ombros." },
      { dia: "Sexta", cat: "cf", exercicio: "CrossFit (Noite)", series: "WOD", obs: "Sexta geralmente √© pesado. Coma bem." },

      // --- S√ÅBADO: POSTERIOR DE COXA (Stiff) ---
      { dia: "S√°bado", cat: "musc", exercicio: "Stiff", series: "4x10", obs: "Posterior e Gl√∫teo." },
      { dia: "S√°bado", cat: "musc", exercicio: "Mesa Flexora", series: "4x12", obs: "Isolado." },
      { dia: "S√°bado", cat: "musc", exercicio: "Panturrilhas", series: "5x15", obs: "Semana toda esquecida." },
      { dia: "S√°bado", cat: "cf", exercicio: "Aul√£o de S√°bado", series: "Team WOD", obs: "Divers√£o." },

      // --- DOMINGO: REST ---
      { dia: "Domingo", cat: "musc", exercicio: "Descanso Total", series: "-", obs: "Obrigat√≥rio para SNC." }
    ];

    const DEFAULT_DIETA = [
      // REFEI√á√ÉO 1 (04:30) - PR√â TREINO MUSCULA√á√ÉO
      { dia: "Segunda", refeicao: "1. Pr√©-Muscula√ß√£o (04:30)", item: "Overnight Oats (60g Aveia + Whey)", qtd: 1, un: "pote", grupo: "Manh√£" },
      { dia: "Segunda", refeicao: "1. Pr√©-Muscula√ß√£o (04:30)", item: "Banana", qtd: 1, un: "un", grupo: "Manh√£" },
      // (Replique a l√≥gica de dias da semana se quiser variar)
      { dia: "Ter√ßa", refeicao: "1. Pr√©-Muscula√ß√£o (04:30)", item: "Ovos Mexidos (4) + P√£o", qtd: 1, un: "kit", grupo: "Manh√£" },
      { dia: "Quarta", refeicao: "1. Pr√©-Muscula√ß√£o (04:30)", item: "Overnight Oats", qtd: 1, un: "pote", grupo: "Manh√£" },
      { dia: "Quinta", refeicao: "1. Pr√©-Muscula√ß√£o (04:30)", item: "Ovos Mexidos + P√£o", qtd: 1, un: "kit", grupo: "Manh√£" },
      { dia: "Sexta", refeicao: "1. Pr√©-Muscula√ß√£o (04:30)", item: "Vitamina Whey + Aveia", qtd: 1, un: "copo", grupo: "Manh√£" },

      // REFEI√á√ÉO 2 (08:30) - P√ìS TREINO
      { dia: "Segunda", refeicao: "2. P√≥s-Muscula√ß√£o (08:30)", item: "Iogurte + Whey + Fruta", qtd: 1, un: "kit", grupo: "Manh√£" },
      { dia: "Ter√ßa", refeicao: "2. P√≥s-Muscula√ß√£o (08:30)", item: "Iogurte + Whey + Fruta", qtd: 1, un: "kit", grupo: "Manh√£" },
      { dia: "Quarta", refeicao: "2. P√≥s-Muscula√ß√£o (08:30)", item: "Iogurte + Whey + Fruta", qtd: 1, un: "kit", grupo: "Manh√£" },
      { dia: "Quinta", refeicao: "2. P√≥s-Muscula√ß√£o (08:30)", item: "Sandu√≠che Pasta Amendoim", qtd: 1, un: "un", grupo: "Manh√£" },
      { dia: "Sexta", refeicao: "2. P√≥s-Muscula√ß√£o (08:30)", item: "Iogurte + Whey + Fruta", qtd: 1, un: "kit", grupo: "Manh√£" },

      // REFEI√á√ÉO 3 (12:30) - ALMO√áO REFOR√áADO
      { dia: "Segunda", refeicao: "3. Almo√ßo", item: "Carne/Frango (200g) + Arroz (300g)", qtd: 1, un: "marmita", grupo: "Almo√ßo" },
      { dia: "Segunda", refeicao: "3. Almo√ßo", item: "Vegetais", qtd: 1, un: "por√ß√£o", grupo: "Almo√ßo" },
      // ... (Pode simplificar visualiza√ß√£o na lista) ...

      // REFEI√á√ÉO 4 (17:30) - PR√â CROSSFIT (NOVA E CRUCIAL)
      { dia: "Segunda", refeicao: "4. Pr√©-CrossFit (17:30)", item: "P√£o com Doce de Leite ou Banana", qtd: 2, un: "fatias", grupo: "Tarde" },
      { dia: "Segunda", refeicao: "4. Pr√©-CrossFit (17:30)", item: "Whey Protein (se n√£o for jantar logo)", qtd: 1, un: "dose", grupo: "Tarde" },
      { dia: "Ter√ßa", refeicao: "4. Pr√©-CrossFit (17:30)", item: "Banana + Aveia + Mel", qtd: 1, un: "bowl", grupo: "Tarde" },
      { dia: "Quarta", refeicao: "4. Pr√©-CrossFit (17:30)", item: "P√£o + Atum/Frango", qtd: 1, un: "sanduiche", grupo: "Tarde" },
      { dia: "Quinta", refeicao: "4. Pr√©-CrossFit (17:30)", item: "Barra de Prote√≠na", qtd: 1, un: "un", grupo: "Tarde" },
      { dia: "Sexta", refeicao: "4. Pr√©-CrossFit (17:30)", item: "A√ßa√≠ (sem exagero)", qtd: 300, un: "ml", grupo: "Tarde" },

      // REFEI√á√ÉO 5 (21:00) - JANTAR P√ìS-WAR
      { dia: "Segunda", refeicao: "5. Jantar", item: "Omelete Grande + Salada", qtd: 1, un: "prato", grupo: "Noite" },
      { dia: "Ter√ßa", refeicao: "5. Jantar", item: "Frango + Batata", qtd: 1, un: "prato", grupo: "Noite" },
      { dia: "Quarta", refeicao: "5. Jantar", item: "Carne Mo√≠da + Arroz", qtd: 1, un: "prato", grupo: "Noite" },
      { dia: "Quinta", refeicao: "5. Jantar", item: "Ovos Cozidos + Salada", qtd: 1, un: "prato", grupo: "Noite" },
      { dia: "Sexta", refeicao: "5. Jantar", item: "Livre (Coma bem!)", qtd: 1, un: "prato", grupo: "Noite" },
      
      // S√ÅBADO E DOMINGO
      { dia: "S√°bado", refeicao: "Geral", item: "High Carb (P√£o, Macarr√£o, Carne)", qtd: 1, un: "dia", grupo: "FDS" },
      { dia: "Domingo", refeicao: "Geral", item: "Descanso / Churrasco / Fam√≠lia", qtd: 1, un: "dia", grupo: "FDS" }
    ];

    // L√ìGICA DO APP
    const STORAGE_KEY = "guerra_fit_v5";
    let logs = {};

    function init() {
      try {
        logs = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
      } catch { logs = {}; }

      // Data Hoje
      const hoje = new Date();
      const localISO = new Date(hoje.getTime() - (hoje.getTimezoneOffset() * 60000)).toISOString().slice(0, 10);
      document.getElementById("dataInput").value = localISO;

      // Select Dias
      const dias = ["Segunda", "Ter√ßa", "Quarta", "Quinta", "Sexta", "S√°bado", "Domingo"];
      const sel = document.getElementById("diaSelect");
      dias.forEach(d => {
        const opt = document.createElement("option");
        opt.value = d; opt.textContent = d; sel.appendChild(opt);
      });
      sel.value = dias[hoje.getDay() === 0 ? 6 : hoje.getDay() - 1]; // Ajuste Domingo=0

      renderApp();
    }

    function renderApp() {
      renderTreino();
      renderDieta('hoje');
    }

    function renderTreino() {
      const dia = document.getElementById("diaSelect").value;
      const data = document.getElementById("dataInput").value;
      const container = document.getElementById("treinoList");
      const filtro = document.querySelector("#view-treino .sub-tabs .active").id;

      container.innerHTML = "";

      // Mostra aviso de conflito Musc/Crossfit
      const aviso = document.getElementById("crossfitWarning");
      aviso.classList.remove("hidden");
      if(dia === "Domingo") aviso.classList.add("hidden");

      const treinos = DEFAULT_TREINOS.filter(t => t.dia === dia);
      
      if(treinos.length === 0) {
         container.innerHTML = `<div class="card text-center" style="color:#666">Descanso.</div>`;
         return;
      }

      let total = 0, done = 0;

      treinos.forEach((t, i) => {
        // Filtros
        if(filtro === "sub-musc" && t.cat !== "musc") return;
        if(filtro === "sub-cf" && t.cat !== "cf") return;

        const key = `${data}_${dia}_${i}`;
        const state = logs[key] || {};
        
        total++;
        if(state.done) done++;

        const typeClass = t.cat === 'musc' ? 'type-strength' : 'type-crossfit';
        const badgeHtml = t.cat === 'cf' ? '<span class="badge cf">CROSSFIT</span>' : '<span class="badge">BODYBUILDING</span>';

        container.innerHTML += `
          <div class="exercise-card ${typeClass}">
            <div class="ex-header">
              <div>
                <div class="ex-title">${t.exercicio}</div>
                <div class="ex-meta">${t.series} ‚Ä¢ ${t.obs}</div>
              </div>
              ${badgeHtml}
            </div>
            
            <div class="ex-inputs">
               <div class="input-group">
                 <label>Carga/Tempo</label>
                 <input type="text" value="${state.val1 || ''}" onchange="save('${key}', 'val1', this.value)">
               </div>
               <div class="input-group">
                 <label>Intensidade</label>
                 <input type="text" value="${state.val2 || ''}" onchange="save('${key}', 'val2', this.value)">
               </div>
            </div>

            <div class="ex-footer">
               <label class="check-btn">
                  <input type="checkbox" class="hidden" ${state.done ? 'checked' : ''} onchange="save('${key}', 'done', this.checked)">
                  <div class="box"></div>
                  <span style="font-weight:700; font-size:12px; color:${state.done ? 'var(--primary)' : '#666'}">
                    ${state.done ? 'CONCLU√çDO' : 'MARCAR FEITO'}
                  </span>
               </label>
            </div>
          </div>
        `;
      });

      // Progress Bar
      const pct = total === 0 ? 0 : Math.round((done/total)*100);
      document.getElementById("progressArea").classList.remove("hidden");
      document.getElementById("progressBar").style.width = pct + "%";
      document.getElementById("progressLabel").textContent = pct + "%";
    }

    function renderDieta(mode) {
      const container = document.getElementById("dietaList");
      container.innerHTML = "";
      
      // Update Tabs Styles
      document.querySelectorAll("#view-dieta .sub-tabs button").forEach(b => b.classList.remove("active"));
      if(mode === 'hoje') document.getElementById("sub-diet-hoje").classList.add("active");
      if(mode === 'semana') document.getElementById("sub-diet-semana").classList.add("active");
      if(mode === 'shop') document.getElementById("sub-diet-shop").classList.add("active");

      if(mode === 'hoje') {
         const dia = document.getElementById("diaSelect").value;
         const itens = DEFAULT_DIETA.filter(d => d.dia === dia || d.dia === "Todos"); // Simplifica√ß√£o
         
         // Agrupar se n√£o achar especifico, mostra mensagem
         if(itens.length === 0) {
            // Fallback para dia gen√©rico se n√£o tiver config
            const fallback = DEFAULT_DIETA.filter(d => d.dia === (dia.includes("S√°b") ? "S√°bado" : "Segunda"));
            renderDietaList(container, fallback);
         } else {
            renderDietaList(container, itens);
         }
      } 
      else if (mode === 'semana') {
          // Vis√£o Macro
          container.innerHTML = `<div class="card"><div style="font-size:12px; line-height:1.6">
            <strong>Seg:</strong> Peito/Ombro + CF<br>
            <strong>Ter:</strong> Costas + CF<br>
            <strong>Qua:</strong> Perna + CF (Cuidado!)<br>
            <strong>Qui:</strong> Bra√ßos + CF (Cardio)<br>
            <strong>Sex:</strong> Upper + CF<br>
            <strong>S√°b:</strong> Posterior + Team WOD<br>
            <strong>Dom:</strong> OFF
          </div></div>`;
      }
      else if (mode === 'shop') {
          // Lista de Compras Simples
          const list = {};
          DEFAULT_DIETA.forEach(d => {
             const k = d.item;
             if(!list[k]) list[k] = 0;
             list[k]++;
          });
          
          let html = `<div class="card">`;
          Object.keys(list).sort().forEach(item => {
             html += `<div class="shop-item" onclick="this.classList.toggle('done')">
               <div style="flex:1">${item}</div>
               <div style="color:var(--primary)">+</div>
             </div>`;
          });
          html += `</div>`;
          container.innerHTML = html;
      }
    }

    function renderDietaList(container, lista) {
       const grupos = [...new Set(lista.map(i => i.refeicao))];
       grupos.forEach(g => {
          let html = `<div class="card" style="padding:12px">
            <h4 style="margin:0 0 8px 0; font-size:13px; color:var(--primary)">${g}</h4>`;
          lista.filter(i => i.refeicao === g).forEach(item => {
             html += `<div class="diet-row">
               <span>${item.item}</span>
               <strong>${item.qtd} ${item.un}</strong>
             </div>`;
          });
          html += `</div>`;
          container.innerHTML += html;
       });
    }

    function switchMain(tab) {
      document.getElementById("view-treino").classList.add("hidden");
      document.getElementById("view-dieta").classList.add("hidden");
      document.getElementById("tab-treino").classList.remove("active");
      document.getElementById("tab-dieta").classList.remove("active");
      
      document.getElementById("view-" + tab).classList.remove("hidden");
      document.getElementById("tab-" + tab).classList.add("active");
    }

    function filterTreino(filter) {
       document.querySelectorAll("#view-treino .sub-tabs button").forEach(b => b.classList.remove("active"));
       document.getElementById("sub-" + filter).classList.add("active");
       renderTreino();
    }

    function save(key, field, val) {
      if(!logs[key]) logs[key] = {};
      logs[key][field] = val;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(logs));
      if(field === 'done') renderTreino();
    }

    // Init
    init();
  </script>
</body>
</html>
